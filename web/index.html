<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <meta name="viewport" content="width=device-width , initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="asstes/Bootstrap/css/bootstrap.css">
    <link rel="stylesheet" href="asstes/Bootstrap/js/bootstrap.js">
    <link rel="stylesheet" href="asstes/Bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="asstes/Bootstrap/js/bootstrap.min.js">
    <style>
        #B2{
            background-color: #AA0000;
            border: 1px solid darkblue;
            width: 300px;
            height: 300px;
            position: absolute;
            top: 200px;
            bottom: 0px;
            left: 10px;
            right: 700px;
            margin: auto;
        }
        #B3{
            background-color: #AA0000;
            border: 1px solid darkblue;
            width: 300px;
            height: 300px;
            position: absolute;
            top: 200px;
            bottom: 0px;
            left: 50px;
            right: 100px;
            margin: auto;
        }

        #B4{
            background-color: #AA0000;
            border: 1px solid darkblue;
            width: 300px;
            height: 300px;
            position: absolute;
            top: 200px;
            bottom: 0px;
            left: 600px;
            right: 0px;
            margin: auto;
        }
        #P2{
            color: black;
            font-size: x-large;
            font-weight: bold;
            position: absolute;
            top: 680px;
            bottom: 0px;
            left: 450px;
            margin: auto;
        }
        #P3{
            color: black;
            font-size: x-large;
            font-weight: bold;
            position: absolute;
            top: 680px;
            bottom: 0px;
            left: 800px;
            margin: auto;
        }
        #P4{
            color: black;
            font-size: x-large;
            font-weight: bold;
            position: absolute;
            top: 680px;
            bottom: 0px;
            left: 1100px;
            margin: auto;
        }
        /*////////////////////////////////////////////////////////////////////////*/

        .nav-bar a:link {
            text-decoration: none;
            font-family: "Arial Black";
            font-size: smaller;
            color: #b6d4fe;
        }
        .nav-bar a:hover {
            text-decoration: none;
            color: purple;
        }
        .btn{
            border-radius: 5px;
            width: 100px;
        }

    </style>
</head>

<body>
<header>
    <nav class="navbar navbar-expand-lg " data-bs-theme="light" style="background-color: lightseagreen;" >
        <div class="container-fluid">
            <a class="navbar-brand text-danger" href="#">Pos System</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse ms-4" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link text-black" aria-current="page" href="#Main3" id="custbtn">Customer</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-black" href="#Main5" id="itembtn">Items</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-black" href="#Main6" id="orderbtn">Orders</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-black" href="#Main7" id="placeorderbtn">Place Orders</a>
                    </li>

                </ul>
                <form class="d-flex" role="search">
                    <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                    <button class="btn btn-outline-light" type="submit">Search</button>
                </form>
            </div>
        </div>
    </nav>
</header>
<!--//////////////////////////////////////// Main Display //////////////////////////////////////////////////////////////-->

<main id="Main2">
    <section>
        <div class="panel1">
            <button id="B2" > <img src="asstes/Image/customer-review.png" width="250" height="250" ></button>
            <button id="B3" > <img src="asstes/Image/list-items - Copy.png" width="250" height="250"  ></button>
            <button id="B4" > <img src="asstes/Image/checkout - Copy.png" width="250" height="250" ></button>
            <h1 id="P2">Customer</h1>
            <h1 id="P3">Items</h1>
            <h1 id="P4">Place Order</h1>
        </div>
    </section>
</main>

<!--/////////////////////////////////////// Manage Customer ///////////////////////////////////////////////////////////////-->

<main class="container" id="Main3">

    <section class="row p-4 m-0 object-fit-contain" id="customerform">
        <h2 class="text-success pt-5 m-lg-2">Customer Form</h2>
        <section class="col border-dark m-3 border rounded object-fit-contain" >
            <h5 class="text-dark text-center m-lg-3 pt-5" >Add Customer</h5>
            <form>
                <div class="form-floating mb-3 mt-2">
                    <input type="text" class="form-control" id="cid" placeholder="Id">
                    <label for="cid">Id</label>
                </div>

                <div class="form-floating mb-3">
                    <input type="text" class="form-control" id="CusName" placeholder="Name">
                    <label for="CusName">Name</label>
                </div>

                <div class="form-floating mb-3">
                    <input type="email" class="form-control" id="CusAddress" placeholder="Address">
                    <label for="CusAddress">Address</label>
                </div>

                <div class="form-floating mb-3">
                    <input type="email" class="form-control" id="contact" placeholder="Contact">
                    <label for="contact">Contact</label>
                </div>
            </form>

            <div >
                <button type="button" class="btn btn-warning me-1 mt-2 mb-3" id="btncustsave">Save</button>
                <button type="button" class="btn btn-primary me-1 mt-2 mb-3 ms-4" id="btncustupdate">Update</button>
                <button type="button" class="btn btn-danger me-1 mt-2 mb-3 ms-4" id="btncustdelete">Delete</button>
                <button type="button" class="btn btn-success me-1 mt-2 mb-3 ms-4" id="btncustsearch">Search</button>
            </div>

        </section>

        <section class="col border-dark m-3 border rounded object-fit-contain" >
            <h5 class="text-dark text-center m-lg-3 pb-3" >Customer Details</h5>
            <table class="table table-bordered table-hover table-striped">
                <thead class="bg-info text-white">
                <tr>
                    <th>Customer Id</th>
                    <th>Customer Name</th>
                    <th>Customer Address</th>
                    <th>Customer Contact</th>
                </tr>
                </thead>
                <tbody id="tblcustomer1"></tbody>
            </table>
        </section>
    </section>

</main>

<!--//////////////////////////////// Manage Item ///////////////////////////////////////////-->

<main class="container" id="Main5">
    <section class="row p-4 m-0 object-fit-contain" id="Items">
        <h2 class="text-success pt-5 m-lg-2">Manage Items</h2>
        <section class="col border-dark m-3 border rounded object-fit-contain" >
            <h5 class="text-dark text-center m-lg-3 pt-5" >Item Form</h5>
            <form>
                <div class="form-floating mb-3 mt-2">
                    <input type="text" class="form-control" id="Iid" placeholder="Item Id">
                    <label for="Iid">Item id</label>
                </div>

                <div class="form-floating mb-3">
                    <input type="text" class="form-control" id="ItemDesc" placeholder="Item Name">
                    <label for="ItemDesc">Description</label>
                </div>

                <div class="form-floating mb-3">
                    <input type="email" class="form-control" id="UPrice" placeholder="Unit Price">
                    <label for="UPrice">Unit Price</label>
                </div>

                <div class="form-floating mb-3">
                    <input type="email" class="form-control" id="Qty" placeholder="Quantity">
                    <label for="Qty">Quantity</label>
                </div>
            </form>

            <div >
                <button type="button" class="btn btn-warning me-1 mt-2 mb-3" id="btnitemsave">Save</button>
                <button type="button" class="btn btn-primary me-1 mt-2 mb-3 ms-4" id="btnitemupdate">Update</button>
                <button type="button" class="btn btn-danger me-1 mt-2 mb-3 ms-4" id="btnitemdelete">Delete</button>
                <button type="button" class="btn btn-success me-1 mt-2 mb-3 ms-4" id="btnitemsearch">Search</button>
            </div>

        </section>

        <section class="col border-dark m-3 border rounded object-fit-contain">
            <h5 class="text-dark text-center m-lg-3 pb-3" >Item Details</h5>
            <table class="table table-bordered table-hover table-striped">
                <thead class="bg-info text-white">
                <tr>
                    <th>Item Id</th>
                    <th>Item Name</th>
                    <th>Unit Price</th>
                    <th>Quantity</th>
                </tr>
                </thead>
                <tbody id="tblitem1"></tbody>
            </table>
        </section>
    </section>
</main>

<!--///////////////////////////////////// Manage  Order ///////////////////////////////////////////////-->

<main class="container"  id="Main6">
    <h2 class="text-success pt-5 m-lg-2 pb-3">Manage Orders</h2>
    <table class="table table-bordered table-hover table-striped">
        <thead class="bg-info text-white">
        <tr>
            <th>Order Id</th>
            <th>Date</th>
            <th>Customer Id</th>
            <th>Total</th>
            <th>Discount</th>
            <th>Sub Total</th>
        </tr>
        </thead>
        <tbody id="tblorders"></tbody>
    </table>
    </section>
</main>

<!--///////////////////////////////////// Manage Place Order ///////////////////////////////////////////////-->

<main class="container" id="Main7">

    <h2 style="color: blue" class="mt-2 border-bottom">Place Order</h2>

    <section class="row mt-3 border border-dark rounded p-3">
        <form action="">
            <div class="row border border-dark rounded p-2">

                <div class="col">
                    <div class="input-group">
                        <span class="input-group-text">Order ID</span>
                        <input class="form-control" type="text" placeholder="O-001" aria-label="Disabled input example" disabled>
                    </div>
                </div>
                <div class="col">
                    <div class="input-group">
                        <span class="input-group-text">Date</span>
                        <input class="form-control" type="text" placeholder="2023-05-17" aria-label="Disabled input example" disabled>
                    </div>
                </div>
                <div class="col">
                    <div class="input-group">
                        <span class="input-group-text">CustomerID</span>
                        <select class="form-select" aria-label="Default select example">
                            <option selected>Select ID</option>
                            <option value="1">C001</option>
                            <option value="2">C002</option>
                            <option value="3">C003</option>
                        </select>
                    </div>
                </div>
                <div class="col">
                    <div class="input-group">
                        <span class="input-group-text">Customer Name</span>
                        <input class="form-control" type="text" placeholder="" aria-label="Disabled input example" disabled>
                    </div>
                </div>

            </div>
            <div class="row mt-5 mb-2 p-3 border border-dark rounded">

                <div class="col">
                    <div class="input-group">
                        <span class="input-group-text">Item ID</span>
                        <select class="form-select" aria-label="Default select example">
                            <option selected>Select ID</option>
                            <option value="1">I001</option>
                            <option value="2">I002</option>
                            <option value="3">I003</option>
                        </select>
                    </div>
                </div>

                <div class="col">
                    <div class="input-group">
                        <span class="input-group-text">Description</span>
                        <input class="form-control" type="text" placeholder="" aria-label="Disabled input example" disabled>
                    </div>
                </div>

                <div class="col">
                    <div class="input-group">
                        <span class="input-group-text">Qty On Hand</span>
                        <input class="form-control" type="text" placeholder="" aria-label="Disabled input example" disabled>
                    </div>
                </div>

                <div class="col">
                    <div class="input-group">
                        <span class="input-group-text">Unit Price</span>
                        <input class="form-control" type="text" placeholder="" aria-label="Disabled input example" disabled>
                    </div>
                </div>

                <div class="col">
                    <div class="input-group">
                        <span class="input-group-text">Quantity</span>
                        <input class="form-control" type="text" placeholder="" aria-label="Disabled input example">
                    </div>
                </div>

            </div>

            <div class="row mt-3">
                <button type="button" class="btn btn-outline-success col-10 me-1 mt-2 mb-3" id="btnaddtocart">Add to Cart</button>
                <button type="button" class="btn btn-outline-warning col-10 me-1 mt-2 mb-3" id="btnclear">Clear</button>
            </div>

        </form>
    </section>

    <section class="row mt-3 border border-dark rounded p-3">
        <div class="row">
            <table class="table table-bordered table-hover table-striped">
                <thead class="bg-info text-white">
                <tr>
                    <th>Item Id</th>
                    <th>Description</th>
                    <th>Qty</th>
                    <th>Unit Price</th>
                    <th>Total</th>
                    <th>Action</th>
                </tr>
                </thead>
                <tbody id="tblplaceorder"></tbody>
            </table>
        </div>
        <form action="">
            <div class="row mt-3">

                <div class="col">
                    <div class="input-group">
                        <span class="input-group-text">Total-Rs:</span>
                        <input class="form-control" type="text" placeholder="" aria-label="Disabled input example" disabled>
                    </div>
                </div>

                <div class="col">
                    <div class="input-group">
                        <span class="input-group-text">Discount-Rs:</span>
                        <input class="form-control" type="number" placeholder="" aria-label="Disabled input example">
                    </div>
                </div>

                <div class="col">
                    <div class="input-group">
                        <span class="input-group-text">Sub Tot-Rs:</span>
                        <input class="form-control" type="text" placeholder="" aria-label="Disabled input example" disabled>
                    </div>
                </div>
            </div>
        </form>

        <div class="row mt-3">
            <button type="button" class="btn btn-outline-success col-10 me-1 mt-2 mb-3" id="btnpurchase">Purchase</button>
            <button type="button" class="btn btn-outline-danger col-10 me-1 mt-2 mb-3" id="btnCancle">Cancel</button>
        </div>
    </section>
</main>

<!--//////////////////////////////////////////////////////////////////////////////////////////////////////////////-->

<script src="asstes/jquery-3.6.4.min.js"></script>
<script src="asstes/Bootstrap/js/bootstrap.min.js"></script>
<script src="js.js"></script>
<script>
    //display main
    $("#Main2").css("display","block");
    $("#Main3").css("display","none");
    $("#Main4").css("display","none");
    $("#Main5").css("display","none");
    $("#Main6").css("display","none");
    $("#Main7").css("display","none");
// Display Manage Customer
    document.getElementById("B2").addEventListener('click',function (){
        $("#Main2").css("display","none");
        $("#Main3").css("display","block");
        $("#Main4").css("display","none");
        $("#Main5").css("display","none");
        $("#Main6").css("display","none");
        $("#Main7").css("display","none");
    });
    // Display Manage Item
    document.getElementById("B3").addEventListener('click',function (){
        $("#Main2").css("display","none");
        $("#Main3").css("display","none");
        $("#Main4").css("display","none");
        $("#Main5").css("display","block");
        $("#Main6").css("display","none");
        $("#Main7").css("display","none");
    });
    // Display Manage Order
    document.getElementById("B4").addEventListener('click',function (){
        $("#Main2").css("display","none");
        $("#Main3").css("display","none");
        $("#Main4").css("display","none");
        $("#Main5").css("display","none");
        $("#Main6").css("display","none");
        $("#Main7").css("display","block");
    });
    // Display Manage Customer
    document.getElementById("custbtn").addEventListener('click',function (){
        $("#Main2").css("display","none");
        $("#Main3").css("display","block");
        $("#Main4").css("display","none");
        $("#Main5").css("display","none");
        $("#Main6").css("display","none");
        $("#Main7").css("display","none");
    });
    // Display Manage item
    document.getElementById("itembtn").addEventListener('click',function (){
        $("#Main2").css("display","none");
        $("#Main3").css("display","none");
        $("#Main4").css("display","none");
        $("#Main5").css("display","block");
        $("#Main6").css("display","none");
        $("#Main7").css("display","none");
    });
    // Display Manage Order
    document.getElementById("orderbtn").addEventListener('click',function (){
        $("#Main2").css("display","none");
        $("#Main3").css("display","none");
        $("#Main4").css("display","none");
        $("#Main5").css("display","none");
        $("#Main6").css("display","block");
        $("#Main7").css("display","none");
    });
    // Display Manage PlaceOrder
    document.getElementById("placeorderbtn").addEventListener('click',function (){
        $("#Main2").css("display","none");
        $("#Main3").css("display","none");
        $("#Main4").css("display","none");
        $("#Main5").css("display","none");
        $("#Main6").css("display","none");
        $("#Main7").css("display","block");
    });

    loadAllCustomers();
    function loadAllCustomers(){
        $("#tblcustomer1").empty();
        console.log("Stareted")
        $.ajax({
            url:"http://localhost:8080/PosSystem-JavaEE/customer?option=GETALL",
            method:"GET",
            success:function (resp){
                console.log(resp);
                console.log(resp.data)
                if (resp.status==200){
                    for (const customer of resp.data){
                        console.log(customer.id,customer.name,customer.address,customer.contact)
                        let row1 = `<tr><td>${customer.id}</td><td>${customer.name}</td><td>${customer.address}</td><td>${customer.contact}</td></tr>`;
                        $("#tblcustomer1").append(row1);
                    }
                    bindClickEvent();
                }else {
                    alert(resp.message);
                }

            },
            error(ob,textstatus,error){
                alert(textstatus);
            }
        });
    }

    function bindClickEvent(){
        $("#tblcustomer1>tr").click(function (){
            let id = $(this).children().eq(0).text();
            let name = $(this).children().eq(1).text();
            let address = $(this).children().eq(2).text();
            let contact = $(this).children().eq(3).text();
            $("#cid").val(id);
            $("#CusName").val(name);
            $("#CusAddress").val(address);
            $("#contact").val(contact);
        });
    }

    $("#btncustsave").click(function (){
        var costob ={
            "id" : $("#cid").val(),
            "name" : $("#CusName").val(),
            "address" : $("#CusAddress").val(),
            "contact" : $("#contact").val()
        }

        $.ajax({
            url:"http://localhost:8080/PosSystem-JavaEE/customer",
            method:"POST",
            contentType: "application/json",
            data:JSON.stringify(costob),
            success:function (resp){
                if (resp.status==200){
                    alert(resp.message);
                    loadAllCustomers();
                }else {
                    alert(resp.data);
                }
            },
            error(ob,textstatus,error){
                alert(textstatus);
            }
        });
        console.log("Ended");
    });

    $("#btncustupdate").click(function (){
        var costob ={
            "id" : $("#cid").val(),
            "name" : $("#CusName").val(),
            "address" : $("#CusAddress").val(),
            "contact" : $("#contact").val()
        }
        console.log(costob);
        $.ajax({
            url:"http://localhost:8080/PosSystem-JavaEE/customer",
            method:"PUT",
            contentType: "application/json",
            data:JSON.stringify(costob),
            success:function (resp){
                if (resp.status==200){
                    alert(resp.message);
                    loadAllCustomers();
                }else {
                    alert(resp.data);
                }
            },
            error(ob,textstatus,error){
                alert(textstatus);
            }
        });
        console.log("Ended");
    });

    $("#btncustdelete").click(function (){
        let custid = $("#cid").val();
        console.log(custid)
        console.log("Started")
        $.ajax({
            url:"http://localhost:8080/PosSystem-JavaEE/customer?CusdID="+custid,
            method:"DELETE",
            // data:data,
            success:function (resp){
                if (resp.status==200){
                    alert(resp.message);
                    loadAllCustomers();
                }else if (resp.status==400){
                    alert(resp.message);
                }else {
                    alert(resp.message);
                }
            },
            error(ob,textstatus,error){
                alert(textstatus);
            }
        });
        console.log("Ended");
    });

    $("#btncustsearch").click(function (){
        console.log("Started")
        var id = $("#cid").val();
        $.ajax({
            url:"http://localhost:8080/PosSystem-JavaEE/customer?option=SEARCH&CusdID="+id,
            method:"GET",
            success:function (resp){
                if (resp.status==200){cid
                    var data = resp.data;
                    $("#cid").val(data.id);
                    $("#CusName").val(data.name);
                    $("#CusAddress").val(data.address);
                    $("#contact").val(data.contact);
                }else {
                    alert(resp.message);
                }
            },
            error(ob,textstatus,error){
                alert(textstatus);
            }
        });
        console.log("Ended");
    });



</script>
</body>
</html>